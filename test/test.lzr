class ArrayWrapper {
    func ArrayWrapper(array) {
        this.array = array
    }

    func __get__(key) {
        if (typeof(key) == type.number) {
            return this.array[key]
        } else {
            return getAttr(this, key)
        }
    }

    func __set__(key, value) {
        if (typeof(key) == type.number) {
            this.array[key] = value
        } else {
            setAttr(this, key, value)
        }
    }

array = new ArrayWrapper([3, 2, 1])

array[0] = 4
println(array[1])

print(array)